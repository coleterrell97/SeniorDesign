<html>
  <head>
    <title>Settings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='settings.css') }}">
  </head>

  <body>
    <div class="w3-panel w3-red">
  <p><center>Settings</center></p>



<button onclick="window.location.href='/'">Back</button>

<script>
  var config_settings1 = {
        "CAP_PROP_BRIGHTNESS" : 0,
        "CAP_PROP_CONTRAST" : 15,
        "CAP_PROP_SATURATION" : 32,
        "CAP_PROP_SHARPNESS" : 16,
        "CAP_PROP_GAMMA" : 220,
        "CAP_PROP_WHITE_BALANCE_BLUE_U" : 5000,
        "CAP_PROP_GAIN" : 0,
        "CAP_PROP_PAN" : 0,
        "CAP_PROP_TILT" : 0,
        "CAP_PROP_ZOOM" : 100,
        "CAP_PROP_EXPOSURE" : 312,
        "CAP_PROP_BACKLIGHT" : 0,
        "CAP_PROP_ROLL" : 0,
        "CAP_PROP_IRIS" : 0,
        "CAP_PROP_FOCUS" : 0,
        "CAP_PROP_HUE" : 0
    };

  var xhr = new XMLHttpRequest();
  xhr.open('GET', "/send_values");
  xhr.send();

  xhr.onload = function() {
  if (xhr.status != 200) { // analyze HTTP status of the response
    alert(`Error ${xhr.status}: ${xhr.statusText}`); // e.g. 404: Not Found
  }
};

xhr.onprogress = function(event) {
  if (event.lengthComputable) {
    var temp1 = xhr.responseText;
    var json_config_settings = JSON.parse(temp1);
    config_settings1 = json_config_settings;
  }
  document.getElementById("CAP_PROP_BRIGHTNESS").value = config_settings1["CAP_PROP_BRIGHTNESS"];
  document.getElementById("CAP_PROP_CONTRAST").value = config_settings1["CAP_PROP_CONTRAST"];
  document.getElementById("CAP_PROP_SATURATION").value = config_settings1["CAP_PROP_SATURATION"];
  document.getElementById("CAP_PROP_SHARPNESS").value = config_settings1["CAP_PROP_SHARPNESS"];
  document.getElementById("CAP_PROP_GAMMA").value = config_settings1["CAP_PROP_GAMMA"];
  document.getElementById("CAP_PROP_WHITE_BALANCE_BLUE_U").value = config_settings1["CAP_PROP_WHITE_BALANCE_BLUE_U"];
  document.getElementById("CAP_PROP_GAIN").value = config_settings1["CAP_PROP_GAIN"];
  document.getElementById("CAP_PROP_PAN").value = config_settings1["CAP_PROP_PAN"];
  document.getElementById("CAP_PROP_TILT").value = config_settings1["CAP_PROP_TILT"];
  document.getElementById("CAP_PROP_ZOOM").value = config_settings1["CAP_PROP_ZOOM"];
  document.getElementById("CAP_PROP_EXPOSURE").value = config_settings1["CAP_PROP_EXPOSURE"];
  document.getElementById("CAP_PROP_BACKLIGHT").value = config_settings1["CAP_PROP_BACKLIGHT"];
  document.getElementById("CAP_PROP_ROLL").value = config_settings1["CAP_PROP_ROLL"];
  document.getElementById("CAP_PROP_IRIS").value = config_settings1["CAP_PROP_IRIS"];
  document.getElementById("CAP_PROP_FOCUS").value = config_settings1["CAP_PROP_FOCUS"];
  document.getElementById("CAP_PROP_HUE").value = config_settings1["CAP_PROP_HUE"];
};

xhr.onerror = function() {
  alert("Request failed");
};
</script>


<form method="POST" action="/update_values">
  <div class="slidecontainer">

    <label for="-15" class="pull-left">-15</label>
  <input type="range" min="-15" max="15" value='0' name="CAP_PROP_BRIGHTNESS" class="slider" id="CAP_PROP_BRIGHTNESS">
  <label for="15" class="pull-right">15</label>
  <label>Brightness</label>

  <br><label>0</label>
  <input type="range" min="0" max="30" value='0' name="CAP_PROP_CONTRAST" class="slider" id="CAP_PROP_CONTRAST">
  <label>30</label>
  <label>Contrast</label>

  <br><label>0</label>
  <input type="range" min="0" max="60" value="0" name="CAP_PROP_SATURATION" class="slider" id="CAP_PROP_SATURATION">
  <label>60</label>
  <label>Saturation</label>

  <br><label>0</label>
  <input type="range" min="0" max="127" value="0" name="CAP_PROP_SHARPNESS" class="slider" id="CAP_PROP_SHARPNESS">
  <label>127</label>
  <label>Sharpness</label>

  <br><label>40</label>
  <input type="range" min="40" max="500" value="0" name="CAP_PROP_GAMMA" class="slider" id="CAP_PROP_GAMMA">
  <label>500</label>
  <label>Gamma</label>

  <br><input type="range" min="40" max="500" value="0" name="CAP_PROP_WHITE_BALANCE_BLUE_U" class="slider" id="CAP_PROP_WHITE_BALANCE_BLUE_U">
  <label>White Balance Blue</label>

  <br><input type="range" min="40" max="500" value="0" name="CAP_PROP_GAIN" class="slider" id="CAP_PROP_GAIN">
  <label>Gain</label>

  <br><input type="range" min="40" max="500" value="0" name="CAP_PROP_PAN" class="slider" id="CAP_PROP_GAIN">
  <label>Pan</label>

  <br><input type="range" min="0" max="500" value="0" name="CAP_PROP_TILT" class="slider" id="CAP_PROP_TILT">
  <label>Tilt</label>

  <br><input type="range" min="0" max="500" value="0" name="CAP_PROP_ZOOM" class="slider" id="CAP_PROP_ZOOM">
  <label>Zoom</label>

  <br><input type="range" min="0" max="500" value="0" name="CAP_PROP_EXPOSURE" class="slider" id="CAP_PROP_EXPOSURE">
  <label>Exposure</label>

  <br><input type="range" min="0" max="500" value="0" name="CAP_PROP_BACKLIGHT" class="slider" id="CAP_PROP_BACKLIGHT">
  <label>Backlight</label>

  <br><input type="range" min="0" max="500" value="0" name="CAP_PROP_ROLL" class="slider" id="CAP_PROP_ROLL">
  <label>Roll</label>

  <br><input type="range" min="0" max="500" value="0" name="CAP_PROP_IRIS" class="slider" id="CAP_PROP_IRIS">
  <label>Iris</label>

  <br><input type="range" min="0" max="500" value="0" name="CAP_PROP_FOCUS" class="slider" id="CAP_PROP_FOCUS">
  <label>Focus</label>

  <br><input type="range" min="0" max="500" value="0" name="CAP_PROP_HUE" class="slider" id="CAP_PROP_HUE">
  <label>Hue</label>


  <br><input type="submit" value="submit" />

</div>
</form>



    </div>
  </body>
</html>
